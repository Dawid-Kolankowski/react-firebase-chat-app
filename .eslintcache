[{"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\App.tsx":"1","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\index.tsx":"2","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\pages\\Login.tsx":"3","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\pages\\Register.tsx":"4","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\styles\\auth.tsx":"5","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\styles\\components.tsx":"6","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\styles\\globalStyles.tsx":"7","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\Routes.tsx":"8","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\hooks\\useInput.tsx":"9","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\Spinner.tsx":"10","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\providers\\AuthProvider.tsx":"11","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\auth\\PrivateRoute.tsx":"12","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\auth\\PublicRoute.tsx":"13","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\firebase\\firebase.ts":"14","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\firebase\\firebaseUser.ts":"15","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\LeftBar.tsx":"16","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\RightBar.tsx":"17","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\ChatBox.tsx":"18","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\UserInfo.tsx":"19","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\UserMenu.tsx":"20","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\DropdownMenu.tsx":"21","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\hooks\\useHideOnLostFocus.tsx":"22","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\AddFriendsMenu.tsx":"23","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\utils.tsx":"24","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\FriendRequests.tsx":"25","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\UserTile.tsx":"26","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\pages\\Chat.tsx":"27"},{"size":391,"mtime":1614462692356,"results":"28","hashOfConfig":"29"},{"size":194,"mtime":1610734084209,"results":"30","hashOfConfig":"29"},{"size":3171,"mtime":1614185170126,"results":"31","hashOfConfig":"32"},{"size":2568,"mtime":1614185306005,"results":"33","hashOfConfig":"32"},{"size":1556,"mtime":1613873650601,"results":"34","hashOfConfig":"32"},{"size":199,"mtime":1613857988700,"results":"35","hashOfConfig":"29"},{"size":360,"mtime":1613868221811,"results":"36","hashOfConfig":"29"},{"size":813,"mtime":1614105615309,"results":"37","hashOfConfig":"29"},{"size":319,"mtime":1613855049317,"results":"38","hashOfConfig":"29"},{"size":833,"mtime":1613868787707,"results":"39","hashOfConfig":"29"},{"size":1529,"mtime":1614461175450,"results":"40","hashOfConfig":"29"},{"size":707,"mtime":1613944744151,"results":"41","hashOfConfig":"29"},{"size":783,"mtime":1613944745869,"results":"42","hashOfConfig":"29"},{"size":771,"mtime":1613931453079,"results":"43","hashOfConfig":"29"},{"size":996,"mtime":1614462055979,"results":"44","hashOfConfig":"29"},{"size":964,"mtime":1614176681695,"results":"45","hashOfConfig":"29"},{"size":446,"mtime":1614365934037,"results":"46","hashOfConfig":"29"},{"size":377,"mtime":1614105907144,"results":"47","hashOfConfig":"32"},{"size":953,"mtime":1614363381568,"results":"48","hashOfConfig":"29"},{"size":1184,"mtime":1614177955054,"results":"49","hashOfConfig":"29"},{"size":2133,"mtime":1614462716170,"results":"50","hashOfConfig":"29"},{"size":556,"mtime":1614107694072,"results":"51","hashOfConfig":"29"},{"size":4436,"mtime":1614376102526,"results":"52","hashOfConfig":"29"},{"size":89,"mtime":1614202088322,"results":"53","hashOfConfig":"32"},{"size":2364,"mtime":1614462654261,"results":"54","hashOfConfig":"29"},{"size":1141,"mtime":1614374453939,"results":"55","hashOfConfig":"29"},{"size":1036,"mtime":1614462604833,"results":"56","hashOfConfig":"29"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1aq8ua9",{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},"1d26nrf",{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"66"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"82","messages":"83","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"84","messages":"85","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"94"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"97"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"104","messages":"105","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"108","messages":"109","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"110","messages":"111","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"112"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"115","messages":"116","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\App.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\index.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\pages\\Login.tsx",[],["117","118","119","120","121"],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\pages\\Register.tsx",[],["122","123","124","125","126"],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\styles\\auth.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\styles\\components.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\styles\\globalStyles.tsx",[],["127","128","129","130","131"],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\Routes.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\hooks\\useInput.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\Spinner.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\providers\\AuthProvider.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\auth\\PrivateRoute.tsx",["132"],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\auth\\PublicRoute.tsx",["133"],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\firebase\\firebase.ts",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\firebase\\firebaseUser.ts",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\LeftBar.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\RightBar.tsx",[],["134","135","136","137","138"],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\ChatBox.tsx",[],["139","140","141","142","143"],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\UserInfo.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\UserMenu.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\DropdownMenu.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\hooks\\useHideOnLostFocus.tsx",["144","145"],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\AddFriendsMenu.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\utils.tsx",["146"],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\FriendRequests.tsx",["147"],"import React, { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { toast } from 'react-toastify'\r\nimport { firestore } from '../../firebase/firebase'\r\nimport { useAuth } from '../../providers/AuthProvider'\r\nimport { getIdsAndDocs } from '../../utils'\r\nimport UserTile from './UserTile'\r\n\r\nconst FriendRequests: React.FC = () => {\r\n  const [requestUsers, setRequestUsers] = useState<any>([])\r\n  const [requestIds, setRequestIds] = useState<any>([])\r\n  const { user } = useAuth()\r\n  const userRef = firestore.collection('users')\r\n\r\n  useEffect(() => {\r\n    const unsubscribeFromFriendRequests = userRef\r\n      .doc(user!.uid)\r\n      .collection('pendingRequests')\r\n      .onSnapshot((snapshot) => {\r\n        const requests = snapshot.docs.map((doc) => getIdsAndDocs(doc))\r\n        setRequestIds(requests)\r\n      })\r\n\r\n    return () => unsubscribeFromFriendRequests()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    async function getUsers() {\r\n      const results = await Promise.all(\r\n        requestIds.map(async (item: any) => {\r\n          return userRef\r\n            .doc(item.id)\r\n            .get()\r\n            .then((doc) => getIdsAndDocs(doc))\r\n        }),\r\n      )\r\n      setRequestUsers(results)\r\n    }\r\n    getUsers()\r\n  }, [requestIds])\r\n\r\n  const acceptRequest = async (id: string) => {\r\n    const chatRef: any = await firestore.collection('chat').doc()\r\n    chatRef.set({ users: [id, user!.uid] })\r\n\r\n    userRef.doc(user!.uid).collection('pendingRequests').doc(id).delete()\r\n\r\n    userRef.doc(user!.uid).collection('sendRequests').doc(id).delete()\r\n\r\n    userRef\r\n      .doc(user!.uid)\r\n      .collection('friends')\r\n      .doc(id)\r\n      .set({ friendId: id, chatId: chatRef.id })\r\n\r\n    userRef\r\n      .doc(id)\r\n      .collection('friends')\r\n      .doc(user!.uid)\r\n      .set({ friendId: user!.uid, chatId: chatRef.id })\r\n      .then(() => toast.success('Friend added'))\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {requestUsers.length ? (\r\n        <>\r\n          <Header>Friend Requests</Header>\r\n          {requestUsers.map((item: any) => (\r\n            <UserTile key={item.id} onClick={acceptRequest} userDoc={item} />\r\n          ))}\r\n        </>\r\n      ) : null}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default FriendRequests\r\n\r\nconst Header = styled.h2`\r\n  margin-bottom: 1rem;\r\n`\r\n","D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\components\\chat\\UserTile.tsx",[],"D:\\Programowanie\\Portfolio\\react-firebase-chat-app\\src\\pages\\Chat.tsx",["148"],{"ruleId":"149","replacedBy":"150"},{"ruleId":"151","replacedBy":"152"},{"ruleId":"153","replacedBy":"154"},{"ruleId":"155","replacedBy":"156"},{"ruleId":"157","replacedBy":"158"},{"ruleId":"149","replacedBy":"159"},{"ruleId":"151","replacedBy":"160"},{"ruleId":"153","replacedBy":"161"},{"ruleId":"155","replacedBy":"162"},{"ruleId":"157","replacedBy":"163"},{"ruleId":"149","replacedBy":"164"},{"ruleId":"151","replacedBy":"165"},{"ruleId":"153","replacedBy":"166"},{"ruleId":"155","replacedBy":"167"},{"ruleId":"157","replacedBy":"168"},{"ruleId":"169","severity":1,"message":"170","line":2,"column":17,"nodeType":"171","messageId":"172","endLine":2,"endColumn":27},{"ruleId":"169","severity":1,"message":"170","line":2,"column":17,"nodeType":"171","messageId":"172","endLine":2,"endColumn":27},{"ruleId":"149","replacedBy":"173"},{"ruleId":"151","replacedBy":"174"},{"ruleId":"153","replacedBy":"175"},{"ruleId":"155","replacedBy":"176"},{"ruleId":"157","replacedBy":"177"},{"ruleId":"149","replacedBy":"178"},{"ruleId":"151","replacedBy":"179"},{"ruleId":"153","replacedBy":"180"},{"ruleId":"155","replacedBy":"181"},{"ruleId":"157","replacedBy":"182"},{"ruleId":"169","severity":1,"message":"183","line":1,"column":8,"nodeType":"171","messageId":"172","endLine":1,"endColumn":13},{"ruleId":"184","severity":1,"message":"185","line":20,"column":6,"nodeType":"186","endLine":20,"endColumn":8,"suggestions":"187"},{"ruleId":"188","severity":1,"message":"189","line":1,"column":36,"nodeType":"190","messageId":"191","endLine":1,"endColumn":39,"suggestions":"192"},{"ruleId":"184","severity":1,"message":"193","line":41,"column":6,"nodeType":"186","endLine":41,"endColumn":18,"suggestions":"194"},{"ruleId":"184","severity":1,"message":"195","line":18,"column":6,"nodeType":"186","endLine":18,"endColumn":8,"suggestions":"196"},"lines-around-directive",["197"],"global-require",[],"no-buffer-constructor",[],"no-new-require",[],"no-path-concat",[],["197"],[],[],[],[],["197"],[],[],[],[],"@typescript-eslint/no-unused-vars","'useContext' is defined but never used.","Identifier","unusedVar",["197"],[],[],[],[],["197"],[],[],[],[],"'React' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'handleClick'. Either include it or remove the dependency array.","ArrayExpression",["198"],"@typescript-eslint/no-explicit-any","Unexpected any. Specify a different type.","TSAnyKeyword","unexpectedAny",["199","200"],"React Hook useEffect has a missing dependency: 'userRef'. Either include it or remove the dependency array.",["201"],"React Hook useEffect has a missing dependency: 'handler'. Either include it or remove the dependency array.",["202"],"padding-line-between-statements",{"desc":"203","fix":"204"},{"messageId":"205","fix":"206","desc":"207"},{"messageId":"208","fix":"209","desc":"210"},{"desc":"211","fix":"212"},{"desc":"213","fix":"214"},"Update the dependencies array to be: [handleClick]",{"range":"215","text":"216"},"suggestUnknown",{"range":"217","text":"218"},"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct.","suggestNever",{"range":"217","text":"219"},"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of.","Update the dependencies array to be: [requestIds, userRef]",{"range":"220","text":"221"},"Update the dependencies array to be: [handler]",{"range":"222","text":"223"},[491,493],"[handleClick]",[35,38],"unknown","never",[1319,1331],"[requestIds, userRef]",[676,678],"[handler]"]